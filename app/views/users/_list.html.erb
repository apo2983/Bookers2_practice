<style>
.user-edit-icon:hover{
	background-color: #8080807a;;
}

.field_with_errors label{
	background-color: red;
}

.field_with_errors input{
	border: 1px solid red;
}

.field_with_errors textarea{
	border: 1px solid red;
}
/*.field_with_errors:nth-child(2n){
	border: 1px solid red;
}*/
</style>

<div class="col-xs-3">
	<h2>User info</h2>
	<%= link_to edit_user_path(current_user.id) do %>
		<%= attachment_image_tag user,:profile_image,format:'jpeg',fallback:'no_image.jpg',size:'100x100' %>
	<% end %>
	<table class="table">
		<tr>
			<th>name</th>
			<td><%= user.name %></th>
		</tr>
		<tr>
			<th>introduction</th>
			<td><%= user.introduction %></th>
		</tr>
		<tr>
			<th>follows</th>
			<td>
				<%= link_to user.follower.count,user_follows_path(user) %>
			</td>
		</tr>
		<tr>
			<th>followers</th>
			<td>
				<%= link_to user.followed.count,user_followers_path(user) %>
			</td>
		</tr>
	</table>
	<% if current_user != user %>
		<div class="follow_button">
			<%= render "users/follow",user: user %>
		</div>
	<% end %>
	<% if user == current_user %>
		<%= link_to edit_user_path(user.id) do%>
			<i class="fas fa-home col-xs-12 user-edit-icon"></i>
		<% end %>
	<% end %>
	<% unless user.id == current_user.id %>
		<% if @isRoom == true %>
				<div class="chat">
					<%= link_to "チャットへ",room_path(@roomId)%>
				</div>
		<% else%>
			<%= form_with model:user,url:rooms_path,local:true do |f| %>
				<%= f.fields_for @userRoom do |e| %>
					<%= e.hidden_field :user_id,value:@user.id %>
				<% end %>
				<%= f.submit "チャットを新しく始める",class:'btn btn-success' %>
			<% end %>
		<% end %>
	<% end%>
	<h2>New book</h2>
	<%= form_with model:book,url:books_path,method: :post,local: true do |f| %>
		<div class="field">
			<%= f.label :title ,"Title" %>
			<%= f.text_field :title,class:"col-xs-12" %>
		</div>
		<div class="field">
			<%= f.label :body ,"Opinion" %>
			<%= f.text_area :body,class:"col-xs-12" %>
		</div>
		<div class="actions">
			<%= f.submit "Create Book",class:'btn btn-primary col-xs-12 ' %>
		</div>
	<% end %>
</div>